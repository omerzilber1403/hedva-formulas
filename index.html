<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Sustainability Study App</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
  body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f0f4f8; overscroll-behavior: none; }
  .card-container { perspective: 1000px; }
  .card-inner { transition: transform 0.55s cubic-bezier(0.4,0,0.2,1); transform-style: preserve-3d; position: relative; }
  .card-inner.flipped { transform: rotateY(180deg); }
  .card-face { backface-visibility: hidden; -webkit-backface-visibility: hidden; position: absolute; inset: 0; border-radius: 1.25rem; }
  .card-back { transform: rotateY(180deg); }
  .status-unmarked { border-left: 4px solid #cbd5e1; }
  .status-red { border-left: 4px solid #ef4444; }
  .status-yellow { border-left: 4px solid #f59e0b; }
  .status-green { border-left: 4px solid #22c55e; }
  .no-select { user-select: none; -webkit-user-select: none; }
  ::-webkit-scrollbar { width: 4px; } ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
  .shake { animation: shake 0.4s; }
  @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-8px)} 75%{transform:translateX(8px)} }
  .pop { animation: pop 0.2s; }
  @keyframes pop { 0%{transform:scale(1)} 50%{transform:scale(1.06)} 100%{transform:scale(1)} }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useCallback, useRef, useMemo } = React;

// â”€â”€ Load data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const loadData = () => {
  const raw = window.__QUIZ_DATA__;
  if (!raw) return [];
  return raw
    .filter(q => q.question && (q.correct_answer || q.wrong_answers?.length))
    .map(q => ({ ...q, status: 'unmarked' }));
};

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const shuffle = arr => [...arr].sort(() => Math.random() - 0.5);
const getStatusColor = s => ({ unmarked:'bg-slate-400', red:'bg-red-500', yellow:'bg-amber-400', green:'bg-green-500' }[s] || 'bg-slate-400');
const getStatusBorder = s => ({ unmarked:'border-slate-300', red:'border-red-400', yellow:'border-amber-400', green:'border-green-400' }[s] || 'border-slate-300');

// â”€â”€ Icons (inline SVG) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const IconCards = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="2" y="4" width="20" height="16" rx="3" strokeWidth="2"/><line x1="8" y1="4" x2="8" y2="20" strokeWidth="2"/></svg>;
const IconTest  = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>;
const IconList  = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6" strokeWidth="2"/><line x1="8" y1="12" x2="21" y2="12" strokeWidth="2"/><line x1="8" y1="18" x2="21" y2="18" strokeWidth="2"/><line x1="3" y1="6" x2="3.01" y2="6" strokeWidth="2" strokeLinecap="round"/><line x1="3" y1="12" x2="3.01" y2="12" strokeWidth="2" strokeLinecap="round"/><line x1="3" y1="18" x2="3.01" y2="18" strokeWidth="2" strokeLinecap="round"/></svg>;
const IconShuffle = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/></svg>;
const IconFlip = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>;

// â”€â”€ Status badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const StatusDot = ({ status }) => (
  <span className={`inline-block w-2.5 h-2.5 rounded-full ${getStatusColor(status)}`} />
);

// â”€â”€ Filter tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const FilterBar = ({ filter, setFilter, counts }) => {
  const tabs = [
    { key: 'all', label: 'All', color: 'bg-blue-600 text-white', inactive: 'bg-white text-slate-600 border border-slate-200' },
    { key: 'red', label: 'ğŸ”´ Red', color: 'bg-red-500 text-white', inactive: 'bg-white text-red-500 border border-red-200' },
    { key: 'yellow', label: 'ğŸŸ¡ Yellow', color: 'bg-amber-400 text-white', inactive: 'bg-white text-amber-600 border border-amber-200' },
    { key: 'green', label: 'ğŸŸ¢ Know it', color: 'bg-green-500 text-white', inactive: 'bg-white text-green-600 border border-green-200' },
  ];
  return (
    <div className="flex gap-2 overflow-x-auto pb-1 no-select">
      {tabs.map(t => (
        <button key={t.key} onClick={() => setFilter(t.key)}
          className={`flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-semibold transition-all ${filter === t.key ? t.color : t.inactive}`}>
          {t.label} <span className="ml-1 opacity-75">({counts[t.key] ?? 0})</span>
        </button>
      ))}
    </div>
  );
};

// â”€â”€ Confidence buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ConfidenceButtons = ({ status, onSet }) => (
  <div className="flex gap-3 justify-center no-select">
    {[['red','ğŸ”´','Don\'t know'],['yellow','ğŸŸ¡','Almost'],['green','ğŸŸ¢','Got it']].map(([s, emoji, label]) => (
      <button key={s} onClick={() => onSet(s)}
        className={`flex-1 py-3 rounded-2xl text-sm font-bold transition-all active:scale-95 border-2 ${
          status === s
            ? s==='red' ? 'bg-red-500 text-white border-red-500 shadow-md' : s==='yellow' ? 'bg-amber-400 text-white border-amber-400 shadow-md' : 'bg-green-500 text-white border-green-500 shadow-md'
            : 'bg-white text-slate-600 border-slate-200'
        }`}>
        <div className="text-xl">{emoji}</div>
        <div className="text-xs">{label}</div>
      </button>
    ))}
  </div>
);

// â”€â”€ FLASHCARD MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const FlashcardsMode = ({ cards, statuses, setStatus }) => {
  const [idx, setIdx] = useState(0);
  const [flipped, setFlipped] = useState(false);
  const [shuffled, setShuffled] = useState(false);
  const [deck, setDeck] = useState(cards);
  const [slideDir, setSlideDir] = useState('');

  useEffect(() => { setDeck(shuffled ? shuffle(cards) : cards); setIdx(0); setFlipped(false); }, [cards, shuffled]);

  const go = (dir) => {
    setFlipped(false);
    setTimeout(() => {
      setIdx(i => dir === 'next' ? Math.min(i + 1, deck.length - 1) : Math.max(i - 1, 0));
    }, 120);
  };

  if (!deck.length) return (
    <div className="flex flex-col items-center justify-center h-64 text-slate-400">
      <div className="text-5xl mb-4">ğŸ˜´</div>
      <p className="text-lg font-medium">No cards in this filter</p>
    </div>
  );

  const card = deck[idx];
  const cardStatus = statuses[card.id] || 'unmarked';

  return (
    <div className="flex flex-col gap-5">
      {/* Progress */}
      <div className="flex items-center gap-3">
        <div className="flex-1 h-2 bg-slate-200 rounded-full overflow-hidden">
          <div className="h-full bg-blue-500 rounded-full transition-all" style={{ width: `${((idx+1)/deck.length)*100}%` }} />
        </div>
        <span className="text-sm font-semibold text-slate-500 shrink-0">{idx+1} / {deck.length}</span>
        <button onClick={() => setShuffled(s => !s)}
          className={`p-2 rounded-xl border transition-all ${shuffled ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-slate-500 border-slate-200'}`}>
          <IconShuffle />
        </button>
      </div>

      {/* Card */}
      <div className="card-container w-full" style={{ height: 280 }}>
        <div className={`card-inner w-full h-full ${flipped ? 'flipped' : ''}`} onClick={() => setFlipped(f => !f)}>
          {/* Front */}
          <div className={`card-face bg-white shadow-xl border-2 ${getStatusBorder(cardStatus)} flex flex-col items-center justify-center p-6 cursor-pointer`}>
            <div className="text-xs font-bold text-blue-400 uppercase tracking-widest mb-3">Question</div>
            <p className="text-center text-slate-800 font-semibold text-lg leading-snug">{card.question}</p>
            <div className="absolute bottom-4 text-slate-300 text-xs flex items-center gap-1"><IconFlip /><span>tap to flip</span></div>
          </div>
          {/* Back */}
          <div className={`card-face card-back bg-blue-600 shadow-xl flex flex-col items-center justify-center p-6 cursor-pointer`}>
            <div className="text-xs font-bold text-blue-200 uppercase tracking-widest mb-3">Answer</div>
            <p className="text-center text-white font-semibold text-lg leading-snug">{card.correct_answer || '(no answer recorded)'}</p>
            {card.wrong_answers?.length > 0 && (
              <div className="mt-4 w-full">
                <div className="text-xs text-blue-300 mb-1 font-medium">Other options:</div>
                {card.wrong_answers.slice(0,3).map((a,i) => <div key={i} className="text-blue-200 text-xs leading-snug">â€¢ {a}</div>)}
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Confidence */}
      <ConfidenceButtons status={cardStatus} onSet={s => setStatus(card.id, s)} />

      {/* Navigation */}
      <div className="flex gap-3">
        <button onClick={() => go('prev')} disabled={idx === 0}
          className="flex-1 py-4 rounded-2xl font-bold text-slate-600 bg-white border border-slate-200 disabled:opacity-30 active:scale-95 transition-all text-lg">
          â† Prev
        </button>
        <button onClick={() => go('next')} disabled={idx === deck.length - 1}
          className="flex-1 py-4 rounded-2xl font-bold text-white bg-blue-600 disabled:opacity-30 active:scale-95 transition-all shadow-md text-lg">
          Next â†’
        </button>
      </div>
    </div>
  );
};

// â”€â”€ TEST MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const buildQuiz = (cards, allCards) => {
  const allAnswers = allCards.map(c => c.correct_answer).filter(Boolean);
  return shuffle(cards).slice(0, Math.min(20, cards.length)).map(card => {
    const correct = card.correct_answer;
    const wrongs = shuffle(
      [...(card.wrong_answers || []), ...allAnswers.filter(a => a !== correct)]
    ).slice(0, 3);
    const options = shuffle([correct, ...wrongs]);
    return { id: card.id, question: card.question, correct, options };
  });
};

const TestMode = ({ cards, allCards }) => {
  const [quiz, setQuiz] = useState(null);
  const [answers, setAnswers] = useState({});
  const [submitted, setSubmitted] = useState(false);
  const [shakeId, setShakeId] = useState(null);

  const startQuiz = () => {
    setQuiz(buildQuiz(cards, allCards));
    setAnswers({});
    setSubmitted(false);
  };

  useEffect(() => { setQuiz(null); setAnswers({}); setSubmitted(false); }, [cards]);

  const pick = (qid, opt) => {
    if (submitted) return;
    setAnswers(a => ({ ...a, [qid]: opt }));
  };

  const submit = () => {
    const unanswered = quiz.filter(q => !answers[q.id]);
    if (unanswered.length) { setShakeId('submit'); setTimeout(() => setShakeId(null), 500); return; }
    setSubmitted(true);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  if (!cards.length) return (
    <div className="flex flex-col items-center justify-center h-64 text-slate-400">
      <div className="text-5xl mb-4">ğŸš«</div><p>No cards in this filter</p>
    </div>
  );

  if (!quiz) return (
    <div className="flex flex-col items-center gap-6 py-10">
      <div className="text-6xl">ğŸ“</div>
      <div className="text-center">
        <h2 className="text-2xl font-bold text-slate-800">Test Mode</h2>
        <p className="text-slate-500 mt-1">{Math.min(20, cards.length)} questions from {cards.length} cards</p>
      </div>
      <button onClick={startQuiz} className="w-full max-w-xs py-4 rounded-2xl bg-blue-600 text-white font-bold text-lg shadow-lg active:scale-95 transition-all">
        Start Test ğŸš€
      </button>
    </div>
  );

  if (submitted) {
    const score = quiz.filter(q => answers[q.id] === q.correct).length;
    const pct = Math.round((score / quiz.length) * 100);
    const emoji = pct >= 80 ? 'ğŸ‰' : pct >= 50 ? 'ğŸ’ª' : 'ğŸ˜…';
    return (
      <div className="flex flex-col gap-5">
        {/* Score card */}
        <div className={`rounded-2xl p-6 text-center text-white shadow-lg ${pct >= 80 ? 'bg-green-500' : pct >= 50 ? 'bg-amber-400' : 'bg-red-500'}`}>
          <div className="text-5xl mb-2">{emoji}</div>
          <div className="text-4xl font-black">{pct}%</div>
          <div className="text-lg opacity-90">{score} / {quiz.length} correct</div>
        </div>
        <button onClick={startQuiz} className="w-full py-4 rounded-2xl bg-blue-600 text-white font-bold text-lg shadow-md active:scale-95 transition-all">
          Try Again ğŸ”„
        </button>
        {/* Review */}
        <div className="flex flex-col gap-3">
          {quiz.map((q, i) => {
            const correct = answers[q.id] === q.correct;
            return (
              <div key={q.id} className={`rounded-2xl p-4 border-2 ${correct ? 'border-green-300 bg-green-50' : 'border-red-300 bg-red-50'}`}>
                <div className="text-xs font-bold uppercase tracking-wide mb-1 text-slate-500">Q{i+1}</div>
                <p className="font-semibold text-slate-800 text-sm mb-2">{q.question}</p>
                {!correct && <div className="text-red-600 text-sm mb-1">âŒ Your answer: <span className="font-medium">{answers[q.id]}</span></div>}
                <div className="text-green-700 text-sm">âœ… Correct: <span className="font-medium">{q.correct}</span></div>
              </div>
            );
          })}
        </div>
      </div>
    );
  }

  return (
    <div className="flex flex-col gap-5">
      <div className="text-sm text-slate-500 font-medium">{Object.keys(answers).length} / {quiz.length} answered</div>
      {quiz.map((q, i) => (
        <div key={q.id} className="bg-white rounded-2xl shadow-sm border border-slate-100 p-4">
          <div className="text-xs font-bold text-blue-400 uppercase tracking-widest mb-2">Q{i+1}</div>
          <p className="font-semibold text-slate-800 mb-4 leading-snug">{q.question}</p>
          <div className="flex flex-col gap-2">
            {q.options.map((opt, j) => (
              <button key={j} onClick={() => pick(q.id, opt)}
                className={`text-left px-4 py-3 rounded-xl border-2 text-sm font-medium transition-all active:scale-95 ${
                  answers[q.id] === opt ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-slate-200 bg-slate-50 text-slate-700'
                }`}>
                <span className="mr-2 font-bold text-slate-400">{String.fromCharCode(65+j)}.</span>{opt}
              </button>
            ))}
          </div>
        </div>
      ))}
      <button onClick={submit} id="submit-btn"
        className={`w-full py-4 rounded-2xl font-bold text-lg transition-all active:scale-95 shadow-lg ${shakeId === 'submit' ? 'shake' : ''} bg-blue-600 text-white`}>
        Submit Test âœ“
      </button>
    </div>
  );
};

// â”€â”€ CHEAT SHEET MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CheatSheetMode = ({ cards, statuses }) => {
  const [search, setSearch] = useState('');
  const filtered = cards.filter(c =>
    !search || c.question.toLowerCase().includes(search.toLowerCase()) || c.correct_answer?.toLowerCase().includes(search.toLowerCase())
  );
  return (
    <div className="flex flex-col gap-3">
      <input value={search} onChange={e => setSearch(e.target.value)} placeholder="ğŸ” Search..." 
        className="w-full px-4 py-3 rounded-2xl border border-slate-200 bg-white text-slate-800 outline-none focus:border-blue-400 transition-all" />
      <div className="flex flex-col gap-3">
        {filtered.map(card => {
          const s = statuses[card.id] || 'unmarked';
          return (
            <div key={card.id} className={`bg-white rounded-2xl p-4 shadow-sm border-l-4 status-${s}`}>
              <div className="flex items-start gap-2">
                <StatusDot status={s} />
                <div className="flex-1 min-w-0">
                  <p className="font-semibold text-slate-800 text-sm leading-snug">{card.question}</p>
                  <p className="mt-2 text-green-700 font-medium text-sm leading-snug">âœ… {card.correct_answer || 'â€”'}</p>
                  {card.wrong_answers?.length > 0 && (
                    <div className="mt-1.5">
                      {card.wrong_answers.map((a,i) => <div key={i} className="text-red-400 text-xs leading-snug">âœ— {a}</div>)}
                    </div>
                  )}
                </div>
              </div>
            </div>
          );
        })}
        {!filtered.length && <div className="text-center text-slate-400 py-10">No results found</div>}
      </div>
    </div>
  );
};

// â”€â”€ MAIN APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const App = () => {
  const [allCards] = useState(() => loadData());
  const [statuses, setStatuses] = useState(() => {
    try { return JSON.parse(localStorage.getItem('quiz_statuses') || '{}'); } catch { return {}; }
  });
  const [filter, setFilter] = useState('all');
  const [mode, setMode] = useState('flashcards');

  const setStatus = useCallback((id, status) => {
    setStatuses(prev => {
      const next = { ...prev, [id]: status };
      localStorage.setItem('quiz_statuses', JSON.stringify(next));
      return next;
    });
  }, []);

  const counts = useMemo(() => ({
    all: allCards.length,
    red: allCards.filter(c => statuses[c.id] === 'red').length,
    yellow: allCards.filter(c => statuses[c.id] === 'yellow').length,
    green: allCards.filter(c => statuses[c.id] === 'green').length,
  }), [allCards, statuses]);

  const filteredCards = useMemo(() => {
    if (filter === 'all') return allCards;
    return allCards.filter(c => (statuses[c.id] || 'unmarked') === filter);
  }, [allCards, statuses, filter]);

  const resetAll = () => {
    if (!confirm('Reset all confidence levels?')) return;
    setStatuses({});
    localStorage.removeItem('quiz_statuses');
  };

  const tabs = [
    { key: 'flashcards', label: 'Cards', icon: <IconCards /> },
    { key: 'test', label: 'Test', icon: <IconTest /> },
    { key: 'cheatsheet', label: 'List', icon: <IconList /> },
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-100 to-blue-50">
      {/* Header */}
      <div className="sticky top-0 z-30 bg-white/90 backdrop-blur border-b border-slate-100 shadow-sm">
        <div className="max-w-lg mx-auto px-4 pt-4 pb-3 flex flex-col gap-3">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-xl font-black text-slate-800">ğŸŒ¿ Sustainability</h1>
              <p className="text-xs text-slate-400">{allCards.length} questions</p>
            </div>
            <button onClick={resetAll} className="text-xs text-slate-400 bg-slate-100 px-3 py-1.5 rounded-xl">Reset</button>
          </div>
          <FilterBar filter={filter} setFilter={setFilter} counts={counts} />
        </div>
      </div>

      {/* Mode tabs */}
      <div className="max-w-lg mx-auto px-4 pt-4">
        <div className="flex bg-white rounded-2xl p-1 shadow-sm border border-slate-100 mb-5">
          {tabs.map(t => (
            <button key={t.key} onClick={() => setMode(t.key)}
              className={`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-sm font-bold transition-all ${
                mode === t.key ? 'bg-blue-600 text-white shadow-md' : 'text-slate-500'
              }`}>
              {t.icon}<span>{t.label}</span>
            </button>
          ))}
        </div>

        {/* Content */}
        <div className="pb-10">
          {mode === 'flashcards' && <FlashcardsMode cards={filteredCards} statuses={statuses} setStatus={setStatus} />}
          {mode === 'test' && <TestMode cards={filteredCards} allCards={allCards} />}
          {mode === 'cheatsheet' && <CheatSheetMode cards={filteredCards} statuses={statuses} />}
        </div>
      </div>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
<script>
// Inject quiz data as global variable (loaded from JSON file)
window.__QUIZ_DATA__ = null; // will be replaced below
</script>
<script src="quiz_data.js"></script>
</body>
</html>
